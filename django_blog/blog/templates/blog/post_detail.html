{% extends 'base_generic.html' %}

{% block content %}
  <h2>{{ post.title }}</h2>
  <p>{{ post.content }}</p>
  <p>Published on {{ post.published_date }} by {{ post.author }}</p>

  <h3>Comments</h3>
  <ul>
    {% for comment in post.comments.all %}
      <li>{{ comment.author }}: {{ comment.content }} ({{ comment.created_at }})</li>
    {% endfor %}
  </ul>

  <h3>Add a Comment</h3>
  <form method="POST" action="{% url 'add-comment' post.pk %}">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Add Comment</button>
  </form>

  <a href="{% url 'post-edit' post.pk %}">Edit Post</a>
  <a href="{% url 'post-delete' post.pk %}">Delete Post</a>
{% endblock %}
<!DOCTYPE html>
<html>
<head>
    <title>{{ post.title }}</title>
</head>
<body>
    <h2>{{ post.title }}</h2>
    <p>{{ post.content }}</p>
    {% if user == post.author %}
        <a href="{% url 'post_edit' post.pk %}">Edit</a>
        <a href="{% url 'post_delete' post.pk %}">Delete</a>
    {% endif %}
    <a href="{% url 'post_list' %}">Back to Post List</a>
</body>
</html>
